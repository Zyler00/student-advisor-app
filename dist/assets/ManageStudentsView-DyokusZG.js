import{f as y,g as n,m as w,c as r,a as e,j as _,v as b,F as k,n as N,t as i,d as m,w as u,e as h,r as C,o as l}from"./index-ccbdet2U.js";import{u as S}from"./advisor-D7NZ8dGp.js";import"./supabase-1JXeVZ6_.js";const L={class:"bg-white shadow overflow-hidden sm:rounded-lg"},I={class:"px-4 py-5 sm:px-6 flex justify-between items-center"},M={class:"flex items-center"},V={class:"relative rounded-md shadow-sm"},j={class:"border-t border-gray-200 px-4 py-5 sm:p-0"},A={key:0,class:"flex justify-center py-8"},B={key:1,class:"text-center py-8 text-gray-500"},F={key:2,class:"overflow-x-auto"},z={class:"min-w-full divide-y divide-gray-200"},D={class:"bg-white divide-y divide-gray-200"},E={class:"px-6 py-4 whitespace-nowrap"},T={class:"text-sm text-gray-900"},q={class:"px-6 py-4 whitespace-nowrap"},P={class:"flex items-center"},Q={class:"flex-shrink-0 h-10 w-10"},U=["src"],G={class:"ml-4"},H={class:"text-sm font-medium text-gray-900"},J={class:"px-6 py-4 whitespace-nowrap"},K={class:"text-sm text-gray-900"},O={class:"px-6 py-4 whitespace-nowrap"},R={class:"text-sm text-gray-900"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"text-sm text-gray-900"},Y={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},se=y({__name:"ManageStudentsView",setup(Z){const v=S(),a=n([]),c=n(!1),f=n(null),d=n("");w(async()=>{await p()});const p=async()=>{try{c.value=!0;const s=await v.fetchAdvisorStudents();if(console.log("Fetched students data:",s),!s||s.length===0){console.warn("No student data received from advisorStore.fetchAdvisorStudents()"),a.value=[];return}a.value=s}catch(s){console.error("Error fetching students:",s),f.value=s.message}finally{c.value=!1}},g=()=>{if(!d.value.trim()){p();return}const s=d.value.toLowerCase().trim();a.value=a.value.filter(t=>t.studentId&&t.studentId.toLowerCase().includes(s)||t.firstName&&t.firstName.toLowerCase().includes(s)||t.lastName&&t.lastName.toLowerCase().includes(s)||t.email&&t.email.toLowerCase().includes(s))};return(s,t)=>{const x=C("router-link");return l(),r("div",L,[e("div",I,[t[2]||(t[2]=e("div",null,[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"นักศึกษาในที่ปรึกษา"),e("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"},"รายชื่อนักศึกษาที่อยู่ในความดูแลของท่าน")],-1)),e("div",M,[e("div",V,[_(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>d.value=o),onInput:g,class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pr-10 sm:text-sm border-gray-300 rounded-md",placeholder:"ค้นหาตามรหัสนักศึกษา ชื่อ หรือนามสกุล"},null,544),[[b,d.value]]),t[1]||(t[1]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),e("div",j,[c.value?(l(),r("div",A,t[3]||(t[3]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"},null,-1)]))):a.value.length===0?(l(),r("div",B," ไม่พบข้อมูลนักศึกษา ")):(l(),r("div",F,[e("table",z,[t[6]||(t[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," รหัสนักศึกษา "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ชื่อ-นามสกุล "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ภาควิชา "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," อีเมล "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," เบอร์โทรศัพท์ "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," จัดการ ")])],-1)),e("tbody",D,[(l(!0),r(k,null,N(a.value,o=>(l(),r("tr",{key:o.id},[e("td",E,[e("div",T,i(o.studentId),1)]),e("td",q,[e("div",P,[e("div",Q,[e("img",{src:o.profileImage||"https://via.placeholder.com/40",class:"h-10 w-10 rounded-full object-cover",alt:"Profile"},null,8,U)]),e("div",G,[e("div",H,i(o.firstName)+" "+i(o.lastName),1)])])]),e("td",J,[e("div",K,i(o.department),1)]),e("td",O,[e("div",R,i(o.email||"-"),1)]),e("td",W,[e("div",X,i(o.phone||"-"),1)]),e("td",Y,[m(x,{to:{name:"student-detail",params:{id:o.id}},class:"text-blue-600 hover:text-blue-900 mr-4"},{default:u(()=>t[4]||(t[4]=[h(" ดูข้อมูล ")])),_:2},1032,["to"]),m(x,{to:{name:"student-detail",params:{id:o.id}},class:"text-green-600 hover:text-green-900"},{default:u(()=>t[5]||(t[5]=[h(" สนทนา ")])),_:2},1032,["to"])])]))),128))])])]))])])}}});export{se as default};
