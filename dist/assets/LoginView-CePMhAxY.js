import{f as w,g as l,c as i,a as s,e as p,d as h,w as _,r as k,h as V,i as f,j as v,v as x,t as b,u as C,o as c}from"./index-ccbdet2U.js";import{u as z}from"./auth-BFFrcDP0.js";import"./supabase-1JXeVZ6_.js";const B={class:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8"},N={class:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-md"},S={class:"mt-2 text-center text-sm text-gray-600"},j={class:"rounded-md shadow-sm -space-y-px"},M={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},q={class:"block sm:inline"},A=["disabled"],D={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},H=w({__name:"LoginView",setup(L){const o=C(),m=z(),n=l(""),a=l(""),t=l(!1),r=l(null),y=async()=>{var u;try{t.value=!0,r.value=null,await m.login(n.value,a.value);const e=(u=m.user)==null?void 0:u.role;e==="admin"?o.push("/admin"):e==="advisor"?o.push("/advisor"):e==="student"?o.push("/student"):o.push("/")}catch(e){r.value=e.message||"เกิดข้อผิดพลาดในการเข้าสู่ระบบ"}finally{t.value=!1}};return(u,e)=>{const g=k("router-link");return c(),i("div",B,[s("div",N,[s("div",null,[e[4]||(e[4]=s("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"เข้าสู่ระบบ",-1)),s("p",S,[e[3]||(e[3]=p(" หรือ ")),h(g,{to:"/register",class:"font-medium text-blue-600 hover:text-blue-500"},{default:_(()=>e[2]||(e[2]=[p(" ลงทะเบียนสำหรับนักศึกษา ")])),_:1})])]),s("form",{class:"mt-8 space-y-6",onSubmit:V(y,["prevent"])},[s("div",j,[s("div",null,[e[5]||(e[5]=s("label",{for:"username",class:"sr-only"},"ชื่อผู้ใช้",-1)),v(s("input",{id:"username",name:"username",type:"text",required:"","onUpdate:modelValue":e[0]||(e[0]=d=>n.value=d),class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"ชื่อผู้ใช้"},null,512),[[x,n.value]])]),s("div",null,[e[6]||(e[6]=s("label",{for:"password",class:"sr-only"},"รหัสผ่าน",-1)),v(s("input",{id:"password",name:"password",type:"password",required:"","onUpdate:modelValue":e[1]||(e[1]=d=>a.value=d),class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"รหัสผ่าน"},null,512),[[x,a.value]])])]),r.value?(c(),i("div",M,[s("span",q,b(r.value),1)])):f("",!0),s("div",null,[s("button",{type:"submit",disabled:t.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[t.value?(c(),i("span",D,e[7]||(e[7]=[s("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):f("",!0),p(" "+b(t.value?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบ"),1)],8,A)])],32)])])}}});export{H as default};
