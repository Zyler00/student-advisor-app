import{f as u,g as p,m as y,k as h,c as r,a as e,j as _,v as g,i as f,F as v,n as w,t as a,d as b,w as k,e as C,r as N,o as i}from"./index-ccbdet2U.js";import{u as S}from"./advisor-D7NZ8dGp.js";import"./supabase-1JXeVZ6_.js";const L={class:"pb-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},I={class:"mt-3 sm:mt-0 sm:ml-4"},V={class:"flex rounded-md shadow-sm"},j={class:"mt-8 flex flex-col"},A={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},B={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},F={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},D={class:"min-w-full divide-y divide-gray-200"},M={class:"bg-white divide-y divide-gray-200"},T={key:0},U={key:1},q={class:"px-6 py-4 whitespace-nowrap"},E={class:"text-sm text-gray-900"},Q={class:"px-6 py-4 whitespace-nowrap"},z={class:"flex items-center"},G={class:"flex-shrink-0 h-10 w-10"},H=["src"],J={key:1,class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},K={class:"text-gray-500 text-sm"},O={class:"ml-4"},P={class:"text-sm font-medium text-gray-900"},R={class:"px-6 py-4 whitespace-nowrap"},W={class:"text-sm text-gray-900"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"text-sm text-gray-900"},Z={class:"px-6 py-4 whitespace-nowrap"},$={class:"text-sm text-gray-900"},ee={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},re=u({__name:"StudentsListView",setup(te){const l=S(),c=p(!0),d=p("");y(async()=>{try{await l.fetchAdvisorStudents(),console.log("advisorStudents:",l.advisorStudents)}catch(o){console.error("Failed to fetch students:",o)}finally{c.value=!1}});const n=h(()=>{if(!d.value)return l.advisorStudents;const o=d.value.toLowerCase();return l.advisorStudents.filter(t=>t.firstName.toLowerCase().includes(o)||t.lastName.toLowerCase().includes(o)||t.studentId&&t.studentId.toLowerCase().includes(o)||t.email&&t.email.toLowerCase().includes(o))}),m=o=>(o.firstName.charAt(0)+o.lastName.charAt(0)).toUpperCase();return(o,t)=>{const x=N("router-link");return i(),r("div",null,[e("div",L,[t[1]||(t[1]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"รายชื่อนักศึกษาในที่ปรึกษา",-1)),e("div",I,[e("div",V,[_(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"ค้นหานักศึกษา..."},null,512),[[g,d.value]])])])]),e("div",j,[e("div",A,[e("div",B,[e("div",F,[e("table",D,[t[5]||(t[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," รหัสนักศึกษา "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ชื่อ-นามสกุล "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," สาขาวิชา "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," อีเมล "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," เบอร์โทรศัพท์ "),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"แก้ไข")])])],-1)),e("tbody",M,[c.value?(i(),r("tr",T,t[2]||(t[2]=[e("td",{colspan:"6",class:"px-6 py-4 whitespace-nowrap text-center"},[e("div",{class:"text-sm text-gray-500"},"กำลังโหลดข้อมูล...")],-1)]))):n.value.length===0?(i(),r("tr",U,t[3]||(t[3]=[e("td",{colspan:"6",class:"px-6 py-4 whitespace-nowrap text-center"},[e("div",{class:"text-sm text-gray-500"},"ไม่พบข้อมูลนักศึกษา")],-1)]))):f("",!0),(i(!0),r(v,null,w(n.value,s=>(i(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",q,[e("div",E,a(s.studentId),1)]),e("td",Q,[e("div",z,[e("div",G,[s.profileImage?(i(),r("img",{key:0,class:"h-10 w-10 rounded-full object-cover",src:s.profileImage,alt:""},null,8,H)):(i(),r("div",J,[e("span",K,a(m(s)),1)]))]),e("div",O,[e("div",P,a(s.title?s.title+" ":"")+a(s.firstName)+" "+a(s.lastName),1)])])]),e("td",R,[e("div",W,a(s.department),1)]),e("td",X,[e("div",Y,a(s.email||"-"),1)]),e("td",Z,[e("div",$,a(s.phone||"-"),1)]),e("td",ee,[b(x,{to:{name:"student-detail",params:{id:s.id}},class:"bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600"},{default:k(()=>t[4]||(t[4]=[C(" ดูข้อมูล ")])),_:2},1032,["to"])])]))),128))])])])])])])])}}});export{re as default};
