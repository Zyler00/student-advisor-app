import{u as C}from"./advisor-D7NZ8dGp.js";import{f as A,g as r,m as z,c as o,a as e,i as v,F as B,n as H,t as a,o as i}from"./index-ccbdet2U.js";import"./supabase-1JXeVZ6_.js";const D={class:"bg-white shadow overflow-hidden sm:rounded-lg"},M={class:"border-t border-gray-200 px-4 py-5 sm:p-0"},S={key:0,class:"flex justify-center py-8"},U={key:1,class:"text-center py-8 text-black"},$={key:2,class:"flow-root px-4 py-5"},j={role:"list",class:"-my-5 divide-y divide-gray-200"},N={class:"relative focus-within:ring-2 focus-within:ring-gray-400"},F={class:"text-sm font-semibold text-black"},L=["onClick"],E={class:"mt-1 text-sm text-black line-clamp-2"},T={class:"mt-2 flex items-center space-x-4"},q={class:"flex items-center text-sm text-black"},G=["onClick"],I={key:0,class:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},J={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},K={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},O={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},P={class:"sm:flex sm:items-start"},Q={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},R={class:"text-lg leading-6 font-medium text-black",id:"modal-title"},W={class:"mt-2 flex items-center text-sm text-black"},X={class:"mt-4"},Y={class:"text-sm text-black whitespace-pre-line"},Z={key:0,class:"mt-6"},ee={class:"flex items-center"},te={class:"text-sm text-blue-400"},se={class:"bg-gray-100 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ae=A({__name:"AnnouncementsView",setup(le){const y=C(),m=r([]),u=r(!1),_=r(null),d=r(!1),n=r(null);z(async()=>{await k()});const k=async()=>{try{u.value=!0;const s=await y.fetchStudentAnnouncements();m.value=s}catch(s){_.value=s.message}finally{u.value=!1}},V=s=>{n.value=s,d.value=!0},f=s=>s?new Date(s).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",x=s=>{window.open(s,"_blank")};return(s,t)=>{var p,g,h,w,b;return i(),o("div",D,[t[9]||(t[9]=e("div",{class:"px-4 py-5 sm:px-6"},[e("h3",{class:"text-lg leading-6 font-medium text-black"},"ประกาศจากอาจารย์ที่ปรึกษา"),e("p",{class:"mt-1 max-w-2xl text-sm text-black"},"ประกาศและข่าวสารสำคัญจากอาจารย์ที่ปรึกษาของคุณ")],-1)),e("div",M,[u.value?(i(),o("div",S,t[3]||(t[3]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400"},null,-1)]))):m.value.length===0?(i(),o("div",U," ยังไม่มีประกาศ ")):(i(),o("div",$,[e("ul",j,[(i(!0),o(B,null,H(m.value,l=>(i(),o("li",{key:l.id,class:"py-5"},[e("div",N,[e("h3",F,[e("button",{onClick:c=>V(l),class:"hover:underline focus:outline-none text-white"},a(l.title),9,L)]),e("p",E,a(l.description),1),e("div",T,[e("div",q,[t[4]||(t[4]=e("svg",{class:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})],-1)),e("span",null,a(f(l.createdAt)),1)]),l.fileUrl?(i(),o("div",{key:0,class:"flex items-center text-sm text-blue-400 cursor-pointer",onClick:c=>x(l.fileUrl)},t[5]||(t[5]=[e("svg",{class:"flex-shrink-0 mr-1.5 h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z","clip-rule":"evenodd"})],-1),e("span",null,"ไฟล์แนบ",-1)]),8,G)):v("",!0)])])]))),128))])]))]),d.value?(i(),o("div",I,[e("div",J,[e("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[0]||(t[0]=l=>d.value=!1)}),t[8]||(t[8]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",K,[e("div",O,[e("div",P,[e("div",Q,[e("h3",R,a((p=n.value)==null?void 0:p.title),1),e("div",W,[t[6]||(t[6]=e("svg",{class:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})],-1)),e("span",null,a(f((g=n.value)==null?void 0:g.createdAt)),1)]),e("div",X,[e("p",Y,a((h=n.value)==null?void 0:h.description),1)]),(w=n.value)!=null&&w.fileUrl?(i(),o("div",Z,[e("div",ee,[t[7]||(t[7]=e("svg",{class:"flex-shrink-0 mr-1.5 h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z","clip-rule":"evenodd"})],-1)),e("span",te,"ไฟล์แนบ: "+a(((b=n.value)==null?void 0:b.fileName)||"ไฟล์"),1)]),e("button",{onClick:t[1]||(t[1]=l=>{var c;return x(((c=n.value)==null?void 0:c.fileUrl)||"")}),class:"mt-2 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400"}," ดาวน์โหลดไฟล์ ")])):v("",!0)])])]),e("div",se,[e("button",{type:"button",onClick:t[2]||(t[2]=l=>d.value=!1),class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 sm:ml-3 sm:w-auto sm:text-sm"}," ปิด ")])])])])):v("",!0)])}}});export{ae as default};
